 <!doctype html>
<html lang="en">
<title>declarative event tests</title>

<link href="https://unpkg.com/mocha@4.1.0/mocha.css" rel="stylesheet">
<script src="https://unpkg.com/chai/chai.js"></script>
<script src="https://unpkg.com/mocha@4.1.0/mocha.js"></script>
<script src="./setup-mocha.js"></script>

<template id="clickTemplate">
  <a href="#" @click="{{doSomething}}">Click me</a>
</template>
<click-element id="clickElement"></click-element>

<div id="host"></div>
<div id="mocha"></div>

<script type="module">
  import Bram from '../src/bram.js';

  describe('Declarative Events', function(){
    it('Handlers are set up and work', function(){
      class ClickElement extends Bram.Element {
        static get template() {
          return clickTemplate;
        }

        constructor() {
          super();
          this.clicks = 0;
        }

        doSomething(ev) {
          this.clicks++;
          ev.preventDefault();
        }
      }

      customElements.define('click-element', ClickElement);

      var clickElement = document.querySelector('click-element');
      var el = clickElement.shadowRoot.querySelector('a');
      el.dispatchEvent(new Event('click'));

      assert.equal(clickElement.clicks, 1);
    });
  });
</script>