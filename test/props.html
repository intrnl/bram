<!doctype html>
<html lang="en">

<title>A simple test</title>

<link href="https://unpkg.com/mocha@4.1.0/mocha.css" rel="stylesheet">
<script src="https://unpkg.com/chai/chai.js"></script>
<script src="https://unpkg.com/mocha@4.1.0/mocha.js"></script>
<style>
  .green { background: green; }
  .red { background: red; }
  .blue { background: blue; }
</style>

<template>
  <div id="tester" .foo="{{foo}}"></div>
</template>

<div id="host"></div>
<div id="mocha"></div>

<script>
  mocha.setup('bdd');
  assert = chai.assert;

  window.addEventListener('load', () => {
    mocha.run();
  });
</script>

<script type="module">
  import Bram from '../src/bram.js';
  let template = document.querySelector('template');

  let { fragment, model } = Bram.createInstance(template, {
    foo: 'bar'
  });
  host.appendChild(fragment);
  window.model = model;
</script>

<script type="module">
  import Bram from '../src/bram.js';

  describe('Setting properties', function(){
    it('are setting using :prop notation', function(){
      assert.equal(tester.foo, 'bar', 'was set');
    });

    it('prop is not included in the resulting fragment', function(){
      var val = tester.getAttribute(':foo');
      assert.ok(!val);
    });

    describe('live-bound', function(){
      after(function(){
        model.foo = 'bar';
      });

      it('works', function(){
        model.foo = 'qux';
        assert.equal(tester.foo, 'qux');
      });
    });
  });
</script>
</body>
</html>
